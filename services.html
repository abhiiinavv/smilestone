<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMILE STONE - Services</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="assets/css/main.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <style>
        /* Custom styles for Inter font and general body */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* A simple transition for the mobile menu */
        #mobile-menu {
            transition: transform 0.3s ease-in-out;
        }
    </style>
</head>

<body class="min-h-screen bg-gray-100 antialiased">

    <!-- Header Section -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3">
            <div class="flex items-center justify-between">
                <!-- Logo -->
                <a href="index.html" class="flex items-center">
                    <img src="assets/img/SMILESTONELOGOColouredV.jpg" alt="logo" style="width: 125px; height: auto;">
                </a>

                <!-- Desktop Navigation Menu -->
                <div class="hidden md:flex gap-5 ml-auto items-center">

                    <a href="#hero" class="px-3 py-2 text-gray-600 hover:text-cyan-500 font-medium rounded-lg">Home</a>
                    <a href="#about"
                        class="px-3 py-2 text-gray-600 hover:text-cyan-500 font-medium rounded-lg">About</a>
                    <a href="#services"
                        class="px-3 py-2 text-gray-600 hover:text-cyan-500 font-medium rounded-lg">Services</a>
                    <a href="#doctors"
                        class="px-3 py-2 text-gray-600 hover:text-cyan-500 font-medium rounded-lg">Doctors</a>
                    <a href="#faq" class="px-3 py-2 text-gray-600 hover:text-cyan-500 font-medium rounded-lg">FAQs</a>
                    <a href="#contact"
                        class="px-3 py-2 text-gray-600 hover:text-cyan-500 font-medium rounded-lg">Contact</a>
                </div>

                <!-- Desktop CTA Button -->
                <a href="https://practice.hypha.care/branch-catalogue?branch=408&org=365" target="_blank"
                    class="hidden md:block text-white font-medium py-2 px-5 rounded-full hover:opacity-90 transition-colors duration-300"
                    style="background-color: #133e44;">
                    Make an Appointment
                </a>

                <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-gray-600 hover:text-cyan-500 focus:outline-none">
                        <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16m-7 6h7"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Mobile Menu -->
            <div id="mobile-menu" class="md:hidden hidden mt-4">
                <a href="#hero" class="block px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg">Home</a>
                <a href="#about" class="block px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg">About</a>
                <a href="#services" class="block px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg">Services</a>
                <a href="#doctors" class="block px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg">Doctors</a>
                <a href="#faq" class="block px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg">FAQs</a>
                <a href="#contact" class="block px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg">Contact</a>
                <div class="mt-4">
                    <a href="https://practice.hypha.care/branch-catalogue?branch=408&org=365" target="_blank"
                        class="block w-full text-center bg-cyan-500 text-white font-medium py-2 px-4 rounded-full hover:bg-cyan-600 transition-colors duration-300">
                        Make an Appointment
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content Area -->
    <main class="container mx-auto px-4 py-8 md:py-12">
        <!-- Services List Section -->
        <section id="services-list" class="block">
            <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-4">Services</h1>
                <div class="w-24 h-1 mx-auto rounded-full mb-6" style="background-color:#2c4964;"></div>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                    We offer a wide range of dental services tailored to meet your needs.
                </p>
            </div>

            <div id="service-cards-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Service cards will be injected here by JavaScript -->
            </div>
        </section>

        <!-- Service Detail Page Section -->
        <section id="service-detail-page" class="hidden">
            <div class="bg-white rounded-xl shadow-lg p-8 md:p-12 max-w-4xl mx-auto">
                <button id="back-to-services-btn"
                    class="mb-6 flex items-center text-green-600 hover:text-green-700 font-medium transition-colors duration-200">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5"
                        stroke="currentColor" class="w-5 h-5 mr-2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
                    </svg>
                    Back to Services
                </button>

                <img id="detail-image" src="" alt="Service Image"
                    class="w-full h-64 object-cover rounded-lg mb-6 shadow-md"
                    onerror="this.onerror=null; this.src='https://placehold.co/800x400/E0F2F7/000000?text=Service+Image';" />

                <h2 id="detail-title" class="text-3xl md:text-4xl font-bold text-gray-800 mb-4"></h2>
                <p id="detail-full-description" class="text-gray-700 text-lg leading-relaxed mb-6"></p>

                <div id="detail-benefits-section" class="mb-6">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-3">Benefits</h3>
                    <ul id="detail-benefits-list" class="list-disc list-inside text-gray-600 space-y-2">
                        <!-- Benefits will be injected here by JavaScript -->
                    </ul>
                </div>

                <div id="detail-process-section" class="mb-6">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-3">Our Process</h3>
                    <p id="detail-process" class="text-gray-600 leading-relaxed"></p>
                </div>

                <!-- New section for LLM-powered Q&A -->
                <div class="mt-8 pt-6 border-t border-gray-200">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">Ask Our AI Assistant âœ¨</h3>
                    <textarea id="llm-question-input" rows="3"
                        class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 mb-4"
                        placeholder="Have a question about this service?"></textarea>
                    <button id="ask-ai-btn"
                        class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-full shadow-lg transition-colors duration-200">
                        Ask AI Assistant
                    </button>
                    <div id="llm-response" class="mt-4 p-4 bg-blue-50 rounded-lg text-gray-800 hidden">
                        <div id="llm-loading-indicator" class="hidden flex items-center mb-2">
                            <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"></div>
                            <span class="ml-3 text-blue-600">Thinking...</span>
                        </div>
                        <p id="llm-response-text"></p>
                    </div>
                </div>

                <button id="schedule-consultation-btn"
                    class="bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-6 rounded-full shadow-lg transition-colors duration-200 mt-8 w-full md:w-auto"
                    onclick="window.open('https://practice.hypha.care/branch-catalogue?branch=408&org=365', '_blank')">
                    Schedule a Consultation
                </button>
            </div>
        </section>
    </main>

    <!-- Floating Contact Buttons -->
    <a href="https://wa.me/6282636938" class="whatsapp-button" title="Chat on WhatsApp" target="_blank">
        <i class="bi bi-whatsapp"></i>
    </a>
    
    <!-- Call Button -->
    <a href="tel:+916282636938" class="call-button" title="Call Now">
        <i class="bi bi-telephone-fill"></i>
    </a>

    <a class="floating-button" href="https://practice.hypha.care/branch-catalogue?branch=408&org=365" target="_blank"
    style="background: var(--accent-color);
    font-size: 14px;">Booking</a>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- Navbar Toggle ---
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenuButton) {
                mobileMenuButton.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                });
            }

            // --- Services Page Logic ---
            const servicesData = [
                {
                    title: "General Dentistry",
                    description: "Routine check-ups, cleanings, and preventive care to maintain oral health.",
                    imageSrc: "/assets/img/services/general-dent.jpg",
                    fullDescription: "General dentistry focuses on the diagnosis, treatment, and prevention of common oral health conditions. This includes regular check-ups, professional cleanings to remove plaque and tartar, cavity fillings, and preventive education on proper brushing and flossing techniques. Our goal is to help you maintain optimal oral hygiene and prevent dental issues before they become serious.",
                    benefits: [
                        "Early detection of dental problems",
                        "Prevention of cavities and gum disease",
                        "Maintenance of overall oral health",
                        "Personalized oral hygiene advice",
                    ],
                    process: "Routine check-ups involve a thorough examination of your teeth and gums, X-rays if necessary, and a professional cleaning. We'll discuss any concerns and create a personalized treatment plan.",
                },
                {
                    title: "Cosmetic Dentistry",
                    description: "Teeth whitening, veneers, and smile makeovers to enhance aesthetics.",
                    imageSrc: "assets/img/services/cosmetic-dentistry.png",
                    fullDescription: "Cosmetic dentistry is all about enhancing the appearance of your teeth and smile. Our services include teeth whitening to brighten discolored teeth, veneers to correct chips or gaps, dental bonding, and complete smile makeovers. We use advanced techniques and materials to help you achieve the beautiful, confident smile you've always wanted.",
                    benefits: [
                        "Brighter, whiter teeth",
                        "Improved smile aesthetics",
                        "Correction of dental imperfections",
                        "Increased self-confidence",
                    ],
                    process: "After a consultation to understand your aesthetic goals, we'll recommend the best cosmetic procedures. This might involve digital smile design to show you potential results before treatment begins.",
                },
                {
                    title: "Orthodontics",
                    description: "Braces and aligners to correct teeth alignment and bite issues.",
                    imageSrc: "assets/img/services/orthodontics-benefits[1].jpg",
                    fullDescription: "Orthodontics specializes in correcting misaligned teeth and jaws. Whether you need traditional braces or modern clear aligners like Invisalign, we offer solutions to straighten your teeth, improve your bite, and enhance your facial aesthetics. Proper alignment not only improves your smile but also contributes to better oral health and function.",
                    benefits: [
                        "Straightened teeth and improved bite",
                        "Enhanced facial symmetry",
                        "Easier cleaning and reduced risk of decay",
                        "Long-term oral health benefits",
                    ],
                    process: "Your orthodontic journey begins with a comprehensive evaluation, including X-rays and digital scans. We'll then discuss your treatment options, estimated timeline, and financial considerations.",
                },
                {
                    title: "Pediatric Dentistry",
                    description: "Specialized dental care for infants, children, and adolescents.",
                    imageSrc: "assets/img/services/pediatric-dentistry.jpg",
                    fullDescription: "Pediatric dentistry provides comprehensive oral health care for children from infancy through their teenage years. We create a friendly and positive environment to make dental visits comfortable. Our services include regular check-ups, fluoride treatments, sealants, and addressing any specific dental issues that arise during childhood.",
                    benefits: [
                        "Positive dental experiences for children",
                        "Early detection and treatment of childhood dental issues",
                        "Preventive care to protect young teeth",
                        "Guidance on oral habits like thumb sucking",
                    ],
                    process: "Our pediatric visits are focused on making your child feel safe and comfortable. We use age-appropriate language to explain procedures and build a foundation of trust for a lifetime of healthy smiles.",
                },
                {
                    title: "Oral Surgery",
                    description: "Surgical procedures including wisdom tooth extractions and more.",
                    imageSrc: "assets/img/services/oral-surgery.jpg",
                    fullDescription: "Oral surgery addresses a wide range of diseases, injuries, and defects in the head, neck, face, jaws, and the hard and soft tissues of the oral and maxillofacial region. This includes procedures like wisdom tooth removal, dental implant placement, and corrective jaw surgery. Our experienced surgeons use advanced technology to ensure safety and comfort.",
                    benefits: [
                        "Resolution of complex dental issues",
                        "Relief from pain caused by impacted teeth",
                        "Preparation for restorative treatments like implants",
                        "Treatment for oral diseases and injuries",
                    ],
                    process: "The process begins with a detailed consultation and imaging to plan the surgery. We offer various sedation options to ensure your comfort. Post-operative care instructions are provided to facilitate a smooth recovery.",
                },
                {
                    title: "Dental Implants",
                    description: "A permanent solution for replacing missing teeth with a natural look and feel.",
                    imageSrc: "assets/img/services/dental-implants.jpg",
                    fullDescription: "Dental implants are the gold standard for replacing missing teeth. A titanium post is surgically placed into the jawbone, acting as a new root. A custom-made crown is then attached, providing a replacement tooth that looks, feels, and functions just like a natural one. Implants are a durable, long-lasting solution for a complete smile.",
                    benefits: [
                        "Permanent and durable tooth replacement",
                        "Looks and functions like a natural tooth",
                        "Prevents bone loss in the jaw",
                        "Improves chewing ability and speech",
                    ],
                    process: "The implant process involves an initial surgery to place the titanium post, followed by a healing period for it to integrate with the bone (osseointegration). Finally, the custom crown is attached to the implant, completing your restoration.",
                },
                {
                    title: "Root Canal Therapy",
                    description: "Saving a severely infected or damaged tooth from extraction.",
                    imageSrc: "assets/img/services/root-canal.jpg",
                    fullDescription: "Root canal therapy is a treatment used to repair and save a tooth that is badly decayed or becomes infected. During a root canal procedure, the nerve and pulp are removed, and the inside of the tooth is cleaned and sealed. Without treatment, the tissue surrounding the tooth will become infected and abscesses may form. This procedure can save your natural tooth and prevent the need for extraction.",
                    benefits: [
                        "Saves the natural tooth from extraction",
                        "Relieves severe toothache and infection",
                        "Restores normal biting function",
                        "Prevents the spread of infection to other teeth",
                    ],
                    process: "A root canal involves removing the infected pulp, cleaning and disinfecting the root canal system, and then filling and sealing it. A crown is often placed on the tooth afterward to protect it and restore it to full function.",
                },
            ];

            const servicesListSection = document.getElementById('services-list');
            const serviceDetailPageSection = document.getElementById('service-detail-page');
            const serviceCardsContainer = document.getElementById('service-cards-container');
            const backToServicesBtn = document.getElementById('back-to-services-btn');

            const detailImage = document.getElementById('detail-image');
            const detailTitle = document.getElementById('detail-title');
            const detailFullDescription = document.getElementById('detail-full-description');
            const detailBenefitsSection = document.getElementById('detail-benefits-section');
            const detailBenefitsList = document.getElementById('detail-benefits-list');
            const detailProcessSection = document.getElementById('detail-process-section');
            const detailProcess = document.getElementById('detail-process');
            const scheduleConsultationBtn = document.getElementById('schedule-consultation-btn');

            const llmQuestionInput = document.getElementById('llm-question-input');
            const askAiBtn = document.getElementById('ask-ai-btn');
            const llmResponseDiv = document.getElementById('llm-response');
            const llmResponseText = document.getElementById('llm-response-text');
            const llmLoadingIndicator = document.getElementById('llm-loading-indicator');

            let currentService = null;

            function renderServiceCards() {
                if (!serviceCardsContainer) return;
                serviceCardsContainer.innerHTML = '';
                servicesData.forEach(service => {
                    const card = document.createElement('div');
                    card.className = "bg-white rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300 overflow-hidden flex flex-col cursor-pointer";
                    card.innerHTML = `
                        <img src="${service.imageSrc}" alt="${service.title}" class="w-full h-48 object-cover"
                             onerror="this.onerror=null; this.src='https://placehold.co/600x400/E0F2F7/000000?text=${encodeURIComponent(service.title)}';">
                        <div class="p-6 flex flex-col items-center text-center flex-grow">
                            <h3 class="text-xl font-semibold text-gray-800 mb-2">${service.title}</h3>
                            <p class="text-gray-600 text-sm leading-relaxed">${service.description}</p>
                        </div>
                    `;
                    card.addEventListener('click', () => showServiceDetail(service.title));
                    serviceCardsContainer.appendChild(card);
                });
            }

            function showServiceDetail(title) {
                const service = servicesData.find(s => s.title === title);
                if (!service) return;
                currentService = service;

                detailImage.src = service.imageSrc;
                detailImage.alt = service.title;
                detailTitle.textContent = service.title;
                detailFullDescription.textContent = service.fullDescription;
                scheduleConsultationBtn.textContent = `Schedule a Consultation for ${service.title}`;

                detailBenefitsList.innerHTML = '';
                if (service.benefits && service.benefits.length > 0) {
                    detailBenefitsSection.classList.remove('hidden');
                    service.benefits.forEach(benefit => {
                        const li = document.createElement('li');
                        li.textContent = benefit;
                        detailBenefitsList.appendChild(li);
                    });
                } else {
                    detailBenefitsSection.classList.add('hidden');
                }

                if (service.process) {
                    detailProcessSection.classList.remove('hidden');
                    detailProcess.textContent = service.process;
                } else {
                    detailProcessSection.classList.add('hidden');
                }

                llmQuestionInput.value = '';
                llmResponseDiv.classList.add('hidden');
                llmResponseText.textContent = '';
                llmLoadingIndicator.classList.add('hidden');

                servicesListSection.classList.add('hidden');
                serviceDetailPageSection.classList.remove('hidden');
                window.scrollTo(0, 0); // Scroll to top
            }

            function goBackToServices() {
                serviceDetailPageSection.classList.add('hidden');
                servicesListSection.classList.remove('hidden');
                currentService = null;
                window.scrollTo(0, 0); // Scroll to top
            }

            async function callGeminiAPI(prompt, retries = 0) {
                llmLoadingIndicator.classList.remove('hidden');
                llmResponseDiv.classList.remove('hidden');
                llmResponseText.textContent = '';

                const maxRetries = 5;
                const baseDelay = 1000;

                try {
                    let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                    const payload = { contents: chatHistory };
                    // IMPORTANT: The API key is left empty. The environment will securely provide it.
                    const apiKey = "AIzaSyAFEyjTyBjawxjnvCKdMBWPwqUrmRje8oc";
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        if (response.status === 429 && retries < maxRetries) {
                            const delay = baseDelay * Math.pow(2, retries) + Math.random() * 1000;
                            await new Promise(resolve => setTimeout(resolve, delay));
                            return callGeminiAPI(prompt, retries + 1);
                        }
                        throw new Error(`API error: ${response.status} ${response.statusText}`);
                    }

                    const result = await response.json();
                    if (result.candidates && result.candidates[0]?.content?.parts?.[0]) {
                        const text = result.candidates[0].content.parts[0].text;
                        llmResponseText.textContent = text;
                    } else {
                        llmResponseText.textContent = "Sorry, I couldn't get a response. Please try again.";
                    }
                } catch (error) {
                    llmResponseText.textContent = "An error occurred while fetching the response. Please check the console for details.";
                    console.error("Error calling Gemini API:", error);
                } finally {
                    llmLoadingIndicator.classList.add('hidden');
                }
            }

            askAiBtn.addEventListener('click', () => {
                const userQuestion = llmQuestionInput.value.trim();
                if (!userQuestion) {
                    llmResponseText.textContent = "Please enter your question.";
                    llmResponseDiv.classList.remove('hidden');
                    return;
                }
                if (!currentService) return;

                const prompt = `You are a helpful dental assistant for Smile Stone clinic. The user is viewing the page for '${currentService.title}', which is described as: '${currentService.fullDescription}'. The user's question is: '${userQuestion}'. Please provide a concise, friendly, and helpful answer based on this context and general dental knowledge. Keep your answer under 150 words. Do not offer medical advice, instead, encourage them to schedule a consultation.`;
                callGeminiAPI(prompt);
            });

            backToServicesBtn.addEventListener('click', goBackToServices);

            renderServiceCards();
        });
    </script>

</body>

</html>